chrome.storage.sync.set({ONBOARDED:true});(()=>{var __webpack_modules__={47525:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(93150);var webextension_polyfill__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__);if(typeof window!=="undefined"){window.addEventListener("message",(event=>{if(event.origin!=="https://extensionpay.com")return;if(event.source!=window)return;if(event.data==="fetch-user"||event.data==="trial-start"){webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.runtime.sendMessage(event.data)}}),false)}function ExtPay(extension_id){const HOST=`https://extensionpay.com`;const EXTENSION_URL=`${HOST}/extension/${extension_id}`;function timeout(ms){return new Promise((resolve=>setTimeout(resolve,ms)))}async function get(key){try{return await webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.storage.sync.get(key)}catch(e){return await webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.storage.local.get(key)}}async function set(dict){try{return await webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.storage.sync.set(dict)}catch(e){return await webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.storage.local.set(dict)}}webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.management&&webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.management.getSelf().then((async ext_info=>{if(!ext_info.permissions.includes("storage")){var permissions=ext_info.hostPermissions.concat(ext_info.permissions);throw`ExtPay Setup Error: please include the "storage" permission in manifest.json["permissions"] or else ExtensionPay won't work correctly.\n\nYou can copy and paste this to your manifest.json file to fix this error:\n\n"permissions": [\n    ${permissions.map((x=>`"    ${x}"`)).join(",\n")}${permissions.length>0?",":""}\n    "storage"\n]\n`}}));get(["extensionpay_installed_at","extensionpay_user"]).then((async storage=>{if(storage.extensionpay_installed_at)return;const user=storage.extensionpay_user;const date=user?user.installedAt:(new Date).toISOString();await set({extensionpay_installed_at:date})}));const paid_callbacks=[];const trial_callbacks=[];async function create_key(){var body={};var ext_info;if(webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.management){ext_info=await webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.management.getSelf()}else if(webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.runtime){ext_info=await webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.runtime.sendMessage("extpay-extinfo");if(!ext_info){const is_dev_mode=!("update_url"in webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.runtime.getManifest());ext_info={installType:is_dev_mode?"development":"normal"}}}else{throw"ExtPay needs to be run in a browser extension context"}if(ext_info.installType=="development"){body.development=true}const resp=await fetch(`${EXTENSION_URL}/api/new-key`,{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify(body)});if(!resp.ok){throw resp.status,`${HOST}/home`}const api_key=await resp.json();await set({extensionpay_api_key:api_key});return api_key}async function get_key(){const storage=await get(["extensionpay_api_key"]);if(storage.extensionpay_api_key){return storage.extensionpay_api_key}return null}const datetime_re=/^\d\d\d\d-\d\d-\d\dT/;async function fetch_user(){var storage=await get(["extensionpay_user","extensionpay_installed_at"]);const api_key=await get_key();if(!api_key){return{paid:false,paidAt:null,installedAt:storage.extensionpay_installed_at?new Date(storage.extensionpay_installed_at):new Date,trialStartedAt:null}}const resp=await fetch(`${EXTENSION_URL}/api/user?api_key=${api_key}`,{method:"GET",headers:{Accept:"application/json"}});if(!resp.ok)throw"ExtPay error while fetching user: "+await resp.text();const user_data=await resp.json();const parsed_user={};for(var[key,value]of Object.entries(user_data)){if(value&&value.match&&value.match(datetime_re)){value=new Date(value)}parsed_user[key]=value}parsed_user.installedAt=new Date(storage.extensionpay_installed_at);if(parsed_user.paidAt){if(!storage.extensionpay_user||storage.extensionpay_user&&!storage.extensionpay_user.paidAt){paid_callbacks.forEach((cb=>cb(parsed_user)))}}if(parsed_user.trialStartedAt){if(!storage.extensionpay_user||storage.extensionpay_user&&!storage.extensionpay_user.trialStartedAt){trial_callbacks.forEach((cb=>cb(parsed_user)))}}await set({extensionpay_user:user_data});return parsed_user}async function payment_page_link(){var api_key=await get_key();if(!api_key){api_key=await create_key()}return`${EXTENSION_URL}?api_key=${api_key}`}async function open_popup(url,width,height){if(webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.windows&&webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.windows.create){const current_window=await webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.windows.getCurrent();const left=Math.round((current_window.width-width)*.5+current_window.left);const top=Math.round((current_window.height-height)*.5+current_window.top);try{webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.windows.create({url,type:"popup",focused:true,width,height,left,top})}catch(e){webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.windows.create({url,type:"popup",width,height,left,top})}}else{window.open(url,null,`toolbar=no,location=no,directories=no,status=no,menubar=no,width=${width},height=${height},left=450`)}}async function open_payment_page(){const url=await payment_page_link();open_popup(url,500,800)}async function open_trial_page(period){var api_key=await get_key();if(!api_key){api_key=await create_key()}var url=`${EXTENSION_URL}/trial?api_key=${api_key}`;if(period){url+=`&period=${period}`}open_popup(url,500,650)}async function open_login_page(){var api_key=await get_key();if(!api_key){api_key=await create_key()}const url=`${EXTENSION_URL}/reactivate?api_key=${api_key}`;open_popup(url,500,800)}var polling=false;async function poll_user_paid(){if(polling)return;polling=true;var user=await fetch_user();for(var i=0;i<2*60;++i){if(user.paidAt){polling=false;return user}await timeout(1e3);user=await fetch_user()}polling=false}return{getUser:function(){return fetch_user()},onPaid:{addListener:function(callback){const content_script_template=`"content_scripts": [\n                {\n            "matches": ["${HOST}/*"],\n            "js": ["ExtPay.js"],\n            "run_at": "document_start"\n        }]`;const manifest=webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.runtime.getManifest();if(!manifest.content_scripts){throw`ExtPay setup error: To use the onPaid callback handler, please include ExtPay as a content script in your manifest.json. You can copy the example below into your manifest.json or check the docs: https://github.com/Glench/ExtPay#2-configure-your-manifestjson\n\n        ${content_script_template}`}const extpay_content_script_entry=manifest.content_scripts.find((obj=>obj.matches.includes(HOST.replace(":3000","")+"/*")));if(!extpay_content_script_entry){throw`ExtPay setup error: To use the onPaid callback handler, please include ExtPay as a content script in your manifest.json matching "${HOST}/*". You can copy the example below into your manifest.json or check the docs: https://github.com/Glench/ExtPay#2-configure-your-manifestjson\n\n        ${content_script_template}`}else{if(!extpay_content_script_entry.run_at||extpay_content_script_entry.run_at!=="document_start"){throw`ExtPay setup error: To use the onPaid callback handler, please make sure the ExtPay content script in your manifest.json runs at document start. You can copy the example below into your manifest.json or check the docs: https://github.com/Glench/ExtPay#2-configure-your-manifestjson\n\n        ${content_script_template}`}}paid_callbacks.push(callback)}},openPaymentPage:open_payment_page,openTrialPage:open_trial_page,openLoginPage:open_login_page,onTrialStarted:{addListener:function(callback){trial_callbacks.push(callback)}},startBackground:function(){webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.runtime.onMessage.addListener((function(message,sender,send_response){console.log("service worker got message! Here it is:",message);if(message=="fetch-user"){poll_user_paid()}else if(message=="trial-start"){fetch_user()}else if(message=="extpay-extinfo"&&webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.management){return webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.management.getSelf()}}))}}}const __WEBPACK_DEFAULT_EXPORT__=ExtPay},98136:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});const chromeStoredData_1=__webpack_require__(8555);const actionButtonUtils_1=__webpack_require__(37059);const ga_1=__webpack_require__(32458);const generalUtils_1=__webpack_require__(65040);const messageUtils_1=__webpack_require__(5879);const gamepadConfig_1=__webpack_require__(4053);const messages_1=__webpack_require__(28724);const payments_1=__webpack_require__(72133);const trial_1=__webpack_require__(42748);const tabsUtils_1=__webpack_require__(32550);const extpay=(0,payments_1.getExtPay)();extpay.startBackground();let cachedPayment=null;function getPaymentIfNeeded(){return __awaiter(this,void 0,void 0,(function*(){if(!cachedPayment||!cachedPayment.paid&&(0,trial_1.computeTrialState)(cachedPayment.trialStartedAt).status!=="active"){cachedPayment=yield(0,payments_1.getPayment)()}return cachedPayment}))}chrome.runtime.onInstalled.addListener((details=>{if(details.reason==="install"){(0,chromeStoredData_1.storeActiveGamepadConfig)(gamepadConfig_1.DEFAULT_CONFIG_NAME)}chrome.management.getSelf((extInfo=>__awaiter(void 0,void 0,void 0,(function*(){if(extInfo.installType!="development"){if(details.reason=="install"){chrome.tabs.create({url:"https://modernkit.one/xcloud-keyboard-mouse/post-install/?version="+chrome.runtime.getManifest().version+"&extid="+chrome.runtime.id+"&utm_source=extension-postinstall&utm_medium=extension&utm_content=ext-postinstall"})}}if(details.reason=="install"){const tabs=yield(0,tabsUtils_1.getXboxCloudTabs)();tabs.forEach((tab=>__awaiter(void 0,void 0,void 0,(function*(){try{yield chrome.scripting.executeScript({target:{tabId:tab.id},world:"ISOLATED",files:["js/vendor.js","js/post_install_message.js"]})}catch(e){}chrome.runtime.lastError}))))}}))))}));function startExtensionActivePings(){const injectActiveCheck=()=>__awaiter(this,void 0,void 0,(function*(){const tabs=yield(0,tabsUtils_1.getXboxCloudTabs)();tabs.forEach((tab=>__awaiter(this,void 0,void 0,(function*(){try{yield chrome.scripting.executeScript({target:{tabId:tab.id},world:"ISOLATED",files:["js/active_check.js"]})}catch(e){}chrome.runtime.lastError}))))}));setInterval(injectActiveCheck,8e3);setTimeout(injectActiveCheck,500)}startExtensionActivePings();chrome.management.getSelf((extInfo=>{if(extInfo.installType!="development"){try{chrome.runtime.setUninstallURL("https://modernkit.one/xcloud-keyboard-mouse/uninstalled/?version="+chrome.runtime.getManifest().version+"&extid="+chrome.runtime.id+"&utm_source=extension-uninstall&utm_medium=extension&utm_content=ext-uninstall")}catch(e){console.error("Could not set uninstall URL")}}}));chrome.commands.onCommand.addListener((command=>{console.log("Keyboard command:",command);(0,ga_1.postGa)("keyboard_command",{command});const commandToProfileOrder={"profile-prev":true,"profile-next":false};const paymentPromise=getPaymentIfNeeded();(0,chromeStoredData_1.getAllStoredSync)().then((({activeConfig,isEnabled,configs,prefs})=>{const isPrev=commandToProfileOrder[command];if(command==="show-hide-cheatsheet"){const newPrefs=Object.assign(Object.assign({},prefs),{showControlsOverlay:!prefs.showControlsOverlay});(0,messageUtils_1.sendMessage)((0,messages_1.updatePrefsMsg)(newPrefs));(0,chromeStoredData_1.storeGlobalPrefs)(newPrefs)}else{paymentPromise.then((payment=>{if((payment.paid=true)||(0,trial_1.computeTrialState)(payment.trialStartedAt).status==="active"){if(isPrev!==undefined){const configsArray=Object.keys(configs);const currentConfigIndex=configsArray.indexOf(activeConfig);const nextConfigName=currentConfigIndex===-1?gamepadConfig_1.DEFAULT_CONFIG_NAME:(0,generalUtils_1.arrayPrevOrNext)(configsArray,currentConfigIndex,isPrev);const nextConfig=configs[nextConfigName];(0,messageUtils_1.setActiveConfig)(nextConfigName,nextConfig)}else if(command==="toggle-on-off"){if(isEnabled){(0,messageUtils_1.disableActiveConfig)()}else if(activeConfig){(0,messageUtils_1.setActiveConfig)(activeConfig,configs[activeConfig])}}}}))}chrome.runtime.sendMessage((0,messages_1.closeWindowMsg)())}))}));const onMessageHandler=(msg,sender,sendResponse)=>{if(!sender.tab){if(sender.origin!==new URL(chrome.runtime.getURL("")).origin||sender.url!==chrome.runtime.getURL("popup.html"))return false}if(msg.type===messages_1.MessageTypes.FORWARD_TO_ALL_TABS){(0,messageUtils_1.sendMessage)(msg.originalMsg);return false}if(msg.type===messages_1.MessageTypes.INJECTED){console.log("Injected");(0,chromeStoredData_1.getAllStoredSync)().then((({seenOnboarding})=>{sendResponse((0,messages_1.seenOnboardingMsg)(seenOnboarding))}));if(sender.tab){(0,actionButtonUtils_1.enableActionButton)(sender.tab.id)}return true}if(msg.type===messages_1.MessageTypes.INITIALIZED){console.log("Initialized",msg.gameName);(0,chromeStoredData_1.updateGameName)(msg.gameName);Promise.all([(0,chromeStoredData_1.getAllStoredSync)(),getPaymentIfNeeded()]).then((([stored,user])=>{const{isEnabled,activeConfig,configs,seenOnboarding,prefs}=stored;const isAllowed=(user.paid=true)||(0,trial_1.computeTrialState)(user.trialStartedAt).status==="active";const disabled=!isEnabled||!isAllowed;const configName=disabled?null:activeConfig;const config=disabled?null:configs[activeConfig];(0,ga_1.postGa)("initialize",{paid:String(user.paid),seenOnboarding:String(seenOnboarding)});if(msg.gameName){(0,ga_1.postGa)("play",{gameName:msg.gameName})}sendResponse((0,messages_1.initializeResponseMsg)(configName,config,seenOnboarding,prefs))}));return true}if(msg.type===messages_1.MessageTypes.GAME_CHANGED){console.log("Game changed to",msg.gameName);if(msg.gameName){(0,ga_1.postGa)("play",{gameName:msg.gameName})}(0,chromeStoredData_1.updateGameName)(msg.gameName);return false}if(msg.type===messages_1.MessageTypes.SEEN_ONBOARDING){console.log("User dismissed onboarding");(0,ga_1.postGa)("dismiss",{modal:"onboarding_v2"});(0,chromeStoredData_1.storeSeenOnboarding)();return false}if(msg.type===messages_1.MessageTypes.MOUSE_CONTROL_CHANGED&&msg.status=="listening"){try{(0,tabsUtils_1.getActiveTab)().then((tab=>{if(tab){const zoomSettings={mode:"disabled",scope:"per-tab"};try{chrome.tabs.setZoomSettings(tab.id,zoomSettings)}catch(e){console.error("Error setting zoom settings:",e)}}}))}catch(e){console.error("Error getting active tab:",e)}return false}return false};chrome.runtime.onMessage.addListener(onMessageHandler);const allowedOrigins=["https://modernkit.one"];if(false){}const verifySender=sender=>sender&&sender.origin&&allowedOrigins.includes(sender.origin);chrome.runtime.onMessageExternal.addListener(((msg,sender,sendResponse)=>{if(!verifySender(sender)){return}if(msg.action=="MK1_PAGE_INIT_DEMO"){sendResponse(true)}else if(msg.action=="MK1_PROCESS_FORWARDED_MSG"){if(msg.forwardedMessage){onMessageHandler(msg.forwardedMessage,sender,sendResponse)}}}));chrome.runtime.onConnectExternal.addListener((port=>{if(port){if(!verifySender(port.sender)){return}port.onDisconnect.addListener((port=>{(0,messageUtils_1.unregisterPort)(port)}));port.onMessage.addListener(((message,port)=>{if(!verifySender(port.sender)){return}port.postMessage({type:"BG_PORT_RESPONSE_MESSAGE"})}));(0,messageUtils_1.registerPort)(port)}}))},8555:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.getAllStoredSync=exports.getSession=exports.getClientId=exports.storeSession=exports.storeClientId=exports.storeActiveGamepadConfig=exports.storeGlobalPrefs=exports.storeGamepadConfigEnabled=exports.deleteGamepadConfig=exports.storeGamepadConfig=exports.storeSeenOnboarding=exports.getLocalGameStatus=exports.updateGameName=void 0;const gamepadConfig_1=__webpack_require__(4053);const defaults_1=__webpack_require__(53201);var LocalStorageKeys;(function(LocalStorageKeys){LocalStorageKeys["GAME_NAME"]="GAME_NAME";LocalStorageKeys["SESSION"]="SESSION"})(LocalStorageKeys||(LocalStorageKeys={}));var SyncStorageKeys;(function(SyncStorageKeys){SyncStorageKeys["CID"]="CID";SyncStorageKeys["GAMEPAD_CONFIGS"]="GP_CONF";SyncStorageKeys["ACTIVE_GAMEPAD_CONFIG"]="ACTIVE_GP_CONF";SyncStorageKeys["ENABLED"]="ENABLED";SyncStorageKeys["PAYMENT"]="PAYMENT";SyncStorageKeys["ONBOARDED"]="ONBOARDED";SyncStorageKeys["GLOBAL_PREFS"]="PREFS"})(SyncStorageKeys||(SyncStorageKeys={}));function syncStorageSet(items){return __awaiter(this,void 0,void 0,(function*(){try{yield chrome.storage.sync.set(items)}catch(e){yield chrome.storage.local.set(items)}}))}function syncStorageGet(keys){return __awaiter(this,void 0,void 0,(function*(){try{return yield chrome.storage.sync.get(keys)}catch(e){return yield chrome.storage.local.get(keys)}}))}function syncStorageRemove(keys){return __awaiter(this,void 0,void 0,(function*(){try{return yield chrome.storage.sync.remove(keys)}catch(e){return yield chrome.storage.local.remove(keys)}}))}function updateGameName(gameName){return chrome.storage.local.set({[LocalStorageKeys.GAME_NAME]:gameName})}exports.updateGameName=updateGameName;function getLocalGameStatus(){return __awaiter(this,void 0,void 0,(function*(){const data=yield chrome.storage.local.get(LocalStorageKeys.GAME_NAME);return data&&data[LocalStorageKeys.GAME_NAME]||null}))}exports.getLocalGameStatus=getLocalGameStatus;function storeSeenOnboarding(){return syncStorageSet({[SyncStorageKeys.ONBOARDED]:true})}exports.storeSeenOnboarding=storeSeenOnboarding;function storeGamepadConfig(name,gamepadConfig){return syncStorageSet({[`${SyncStorageKeys.GAMEPAD_CONFIGS}:${name}`]:gamepadConfig})}exports.storeGamepadConfig=storeGamepadConfig;function deleteGamepadConfig(name){if(name===gamepadConfig_1.DEFAULT_CONFIG_NAME){throw new Error("Cannot delete default config")}return syncStorageRemove(`${SyncStorageKeys.GAMEPAD_CONFIGS}:${name}`)}exports.deleteGamepadConfig=deleteGamepadConfig;function storeGamepadConfigEnabled(enabled){return syncStorageSet({[SyncStorageKeys.ENABLED]:enabled})}exports.storeGamepadConfigEnabled=storeGamepadConfigEnabled;function storeGlobalPrefs(prefs){return syncStorageSet({[SyncStorageKeys.GLOBAL_PREFS]:prefs})}exports.storeGlobalPrefs=storeGlobalPrefs;function storeActiveGamepadConfig(name){return syncStorageSet({[SyncStorageKeys.ENABLED]:true,[SyncStorageKeys.ACTIVE_GAMEPAD_CONFIG]:name})}exports.storeActiveGamepadConfig=storeActiveGamepadConfig;function storeClientId(clientId){return syncStorageSet({[SyncStorageKeys.CID]:clientId})}exports.storeClientId=storeClientId;function storeSession(session){return chrome.storage.local.set({[LocalStorageKeys.SESSION]:session})}exports.storeSession=storeSession;function getClientId(){return __awaiter(this,void 0,void 0,(function*(){const data=yield syncStorageGet(SyncStorageKeys.CID);return data&&data[SyncStorageKeys.CID]||null}))}exports.getClientId=getClientId;function getSession(){return __awaiter(this,void 0,void 0,(function*(){const data=yield chrome.storage.local.get(LocalStorageKeys.SESSION);return data&&data[LocalStorageKeys.SESSION]||null}))}exports.getSession=getSession;function normalizeGamepadConfigs(data={}){const cid=data[SyncStorageKeys.CID];const activeConfig=data[SyncStorageKeys.ACTIVE_GAMEPAD_CONFIG]||gamepadConfig_1.DEFAULT_CONFIG_NAME;const payment=data[SyncStorageKeys.PAYMENT];const prefs=data[SyncStorageKeys.GLOBAL_PREFS]||defaults_1.defaultPrefs;const isEnabled=data[SyncStorageKeys.ENABLED]===undefined?!!data[SyncStorageKeys.ACTIVE_GAMEPAD_CONFIG]:data[SyncStorageKeys.ENABLED];const allKeys=Object.keys(data);const configKeys=allKeys.filter((key=>key.startsWith(SyncStorageKeys.GAMEPAD_CONFIGS)));const seenOnboarding=data[SyncStorageKeys.ONBOARDED]||configKeys.length>1||activeConfig!==gamepadConfig_1.DEFAULT_CONFIG_NAME;const initialConfigsMap={[gamepadConfig_1.DEFAULT_CONFIG_NAME]:gamepadConfig_1.defaultGamepadConfig};return{cid,isEnabled,activeConfig,seenOnboarding,payment,prefs,configs:configKeys.reduce(((configs,key)=>{const name=key.split(":")[1];const config=data[key];(0,gamepadConfig_1.upgradeOldGamepadConfig)(config);configs[name]=config;return configs}),initialConfigsMap)}}function getAllStoredSync(){return __awaiter(this,void 0,void 0,(function*(){const data=yield syncStorageGet(null);return normalizeGamepadConfigs(data)}))}exports.getAllStoredSync=getAllStoredSync},37059:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.enableActionButton=exports.disableActionButton=void 0;function disableActionButton(){if(chrome.action!==undefined){return chrome.action.disable()}else{return chrome.browserAction.disable()}}exports.disableActionButton=disableActionButton;function enableActionButton(tabId){if(chrome.action!==undefined){return chrome.action.enable(tabId)}else{return chrome.browserAction.enable(tabId)}}exports.enableActionButton=enableActionButton},32458:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.postGa=exports.postStats=exports.getClientIdAndSession=void 0;const uuid_1=__webpack_require__(67429);const chromeStoredData_1=__webpack_require__(8555);const debug=false;const rootUrl=`https://www.google-analytics.com/${debug?"debug/":""}mp/collect`;const extUrl="https://davididol.com/xcloud-keyboard-mouse/EXT";const GA_API_TOKEN="w30DzBnFR6y7CE6iHTGvBg";const GA_MEASUREMENT_ID="G-DKKYLRVJYT";let cachedClientId=null;let cachedSession=null;function getClientIdAndSession(){return __awaiter(this,void 0,void 0,(function*(){const[maybeClientId,maybeSession]=yield Promise.all([cachedClientId||(0,chromeStoredData_1.getClientId)(),cachedSession||(0,chromeStoredData_1.getSession)()]);const savePromises=[];if(!maybeClientId){cachedClientId=(0,uuid_1.v4)();savePromises.push((0,chromeStoredData_1.storeClientId)(cachedClientId))}else{cachedClientId=maybeClientId}const sessionExpirationMs=30*60*1e3;const now=(new Date).getTime();if(!maybeSession||now-maybeSession.startMs>sessionExpirationMs){cachedSession={sessionId:(0,uuid_1.v4)(),startMs:now};savePromises.push((0,chromeStoredData_1.storeSession)(cachedSession))}else{cachedSession=maybeSession}yield Promise.all(savePromises);return{clientId:cachedClientId,session:cachedSession}}))}exports.getClientIdAndSession=getClientIdAndSession;function postStats(eventName){return __awaiter(this,void 0,void 0,(function*(){const{clientId}=yield getClientIdAndSession();if(!cachedClientId){console.error(`Ignoring MK1 stats event "${eventName}" due to missing cid`);return}try{yield fetch("https://api.modernkit.one/stats",{headers:{"content-type":"application/json"},method:"POST",mode:"no-cors",cache:"no-cache",referrerPolicy:"no-referrer",body:JSON.stringify({app:"ext-xkbm",event:eventName,uuid:clientId,version:chrome.runtime.getManifest().version,extid:chrome.runtime.id})})}catch(e){console.error("MK1 stats failed to send")}}))}exports.postStats=postStats;function postGa(eventName,inputParams={}){return __awaiter(this,void 0,void 0,(function*(){if(!GA_API_TOKEN){console.error("Missing GA API token");return}const{clientId,session}=yield getClientIdAndSession();if(!cachedClientId){console.error(`Ignoring GA event "${eventName}" due to missing cid`);return}let params=Object.assign(Object.assign({},inputParams),{engagement_time_msec:String((new Date).getTime()-session.startMs),session_id:session.sessionId.toString()});if(eventName==="page_view"){params=Object.assign(Object.assign({},params),{page_location:extUrl+params.page_location})}params=Object.assign(Object.assign({},params),{flow_ver:"v2"});try{(0,chromeStoredData_1.storeSession)(Object.assign(Object.assign({},session),{startMs:(new Date).getTime()}));yield fetch(`${rootUrl}?measurement_id=${GA_MEASUREMENT_ID}&api_secret=${GA_API_TOKEN}`,{method:"POST",mode:"no-cors",cache:"no-cache",referrerPolicy:"no-referrer",body:JSON.stringify({client_id:clientId,events:[{name:eventName,params}]})})}catch(e){console.error("GA failed to send")}}))}exports.postGa=postGa},65040:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.arrayPrevOrNext=void 0;function arrayPrevOrNext(array,currentIndex,isPrev){const n=array.length;if(n===0){throw new Error("Array must not be empty")}if(n===1){return array[currentIndex]}const i=currentIndex+(isPrev?-1:1);return array[(i%n+n)%n]}exports.arrayPrevOrNext=arrayPrevOrNext},5879:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.disableActiveConfig=exports.setActiveConfig=exports.unregisterPort=exports.registerPort=exports.sendMessage=void 0;const messages_1=__webpack_require__(28724);const chromeStoredData_1=__webpack_require__(8555);const tabsUtils_1=__webpack_require__(32550);function isInBackgroundServiceWorker(){return self.constructor.name==="ServiceWorkerGlobalScope"}function sendMessage(msg){return __awaiter(this,void 0,void 0,(function*(){if(isInBackgroundServiceWorker()){sendMessageToAllTabs(msg);sendMessageToAllPorts(msg)}else{chrome.runtime.sendMessage({type:messages_1.MessageTypes.FORWARD_TO_ALL_TABS,originalMsg:msg},(()=>{chrome.runtime.lastError}))}}))}exports.sendMessage=sendMessage;const externalPorts=[];function getPortNumber(port){return parseInt(port.name.split("-").pop())}function registerPort(port){const portNumber=getPortNumber(port);externalPorts[portNumber]=port}exports.registerPort=registerPort;function unregisterPort(port){const portNumber=getPortNumber(port);delete externalPorts[portNumber]}exports.unregisterPort=unregisterPort;function sendMessageToAllPorts(msg){return __awaiter(this,void 0,void 0,(function*(){externalPorts.forEach((port=>{port.postMessage(msg)}))}))}function sendMessageToAllTabs(msg){return __awaiter(this,void 0,void 0,(function*(){const tabs=yield(0,tabsUtils_1.getXboxCloudTabs)();tabs.forEach((tab=>{chrome.tabs.sendMessage(tab.id,msg,(()=>{chrome.runtime.lastError}))}))}))}function setActiveConfig(name,gamepadConfig){return __awaiter(this,void 0,void 0,(function*(){yield sendMessage((0,messages_1.activateGamepadConfigMsg)(name,gamepadConfig));yield(0,chromeStoredData_1.storeActiveGamepadConfig)(name);return{name,gamepadConfig}}))}exports.setActiveConfig=setActiveConfig;function disableActiveConfig(){return __awaiter(this,void 0,void 0,(function*(){yield sendMessage((0,messages_1.disableGamepadMsg)());yield(0,chromeStoredData_1.storeGamepadConfigEnabled)(false)}))}exports.disableActiveConfig=disableActiveConfig},32550:function(__unused_webpack_module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:true});exports.getXboxCloudTabs=exports.getAllTabs=exports.getActiveTab=void 0;function getActiveTab(){return __awaiter(this,void 0,void 0,(function*(){const tabs=yield chrome.tabs.query({active:true,currentWindow:true});return tabs[0]}))}exports.getActiveTab=getActiveTab;function getAllTabs(){return __awaiter(this,void 0,void 0,(function*(){const tabs=yield chrome.tabs.query({status:"complete"});return tabs}))}exports.getAllTabs=getAllTabs;function getXboxCloudTabs(){return __awaiter(this,void 0,void 0,(function*(){const tabs=yield chrome.tabs.query({discarded:false,status:"complete",windowType:"normal",url:"https://*.xbox.com/*"});return tabs}))}exports.getXboxCloudTabs=getXboxCloudTabs},53201:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultPrefs=void 0;exports.defaultPrefs={showControlsOverlay:false}},43842:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.camelToSpace=void 0;function camelToSpace(str){const cleanedUp=str.replace(/([a-z|0-9])([A-Z])/g,"$1 $2");return cleanedUp.charAt(0).toUpperCase()+cleanedUp.slice(1)}exports.camelToSpace=camelToSpace},4053:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.emptyGamepadConfig=exports.defaultGamepadConfig=exports.isGamepadConfigValid=exports.validateMouseConfig=exports.processGamepadConfig=exports.upgradeOldGamepadConfig=exports.isButtonMapping=exports.MAX_BINDINGS_PER_BUTTON=exports.DEFAULT_SENSITIVITY=exports.MAX_NUM_CONFIGS=exports.DEFAULT_CONFIG_NAME=void 0;const formattingUtils_1=__webpack_require__(43842);exports.DEFAULT_CONFIG_NAME="default";exports.MAX_NUM_CONFIGS=25;exports.DEFAULT_SENSITIVITY=10;exports.MAX_BINDINGS_PER_BUTTON=2;const buttonToGamepadIndex={a:0,b:1,x:2,y:3,leftShoulder:4,rightShoulder:5,leftTrigger:6,rightTrigger:7,select:8,start:9,leftStickPressed:10,rightStickPressed:11,dpadUp:12,dpadDown:13,dpadLeft:14,dpadRight:15,home:16};const buttonToAxisIndex=button=>button[0]==="l"?0:1;const buttonToAxisDirection=button=>button.replace(/^(left|right)Stick/,"")[0].toLowerCase();const isButtonMapping=mapping=>mapping.gamepadIndex!==undefined;exports.isButtonMapping=isButtonMapping;function upgradeOldGamepadConfig(config){const{keyConfig}=config;Object.keys(keyConfig).forEach((button=>{const keyMap=keyConfig[button];if(!keyMap){return}const codes=(!Array.isArray(keyMap)?[keyMap]:keyMap).flatMap((code=>{if(code==="Scroll"){return["ScrollUp","ScrollDown"]}return code}));keyConfig[button]=codes}))}exports.upgradeOldGamepadConfig=upgradeOldGamepadConfig;function processGamepadConfig(config){const codeMapping={};const invalidButtons={};Object.keys(config).forEach((button=>{const keyMap=config[button];if(!keyMap){return}const codes=!Array.isArray(keyMap)?[keyMap]:keyMap;for(const code of codes){if(code==="Escape"){invalidButtons[button]="Binding Escape key is not allowed";continue}if(codeMapping[code]){invalidButtons[button]=`'${code}' is already bound to button '${(0,formattingUtils_1.camelToSpace)(codeMapping[code].button)}'`;continue}const gamepadIndex=buttonToGamepadIndex[button];if(gamepadIndex!==undefined){codeMapping[code]={button,gamepadIndex}}else{const axisIndex=buttonToAxisIndex(button);const axisDirection=buttonToAxisDirection(button);codeMapping[code]={button,axisIndex,axisDirection}}}}));return{codeMapping,invalidButtons,hasErrors:Object.keys(invalidButtons).length>0}}exports.processGamepadConfig=processGamepadConfig;function validateMouseConfig(mouseConfig){const{sensitivity,mouseControls}=mouseConfig;const errors={};if(mouseControls!==undefined&&mouseControls!==0&&mouseControls!==1){errors.mouseControls="Invalid stick number"}if(sensitivity<1||sensitivity>1e3){errors.mouseControls="Invalid sensitivity value. Must be between 1 and 1000."}return{errors,hasErrors:Object.keys(errors).length>0}}exports.validateMouseConfig=validateMouseConfig;function isGamepadConfigValid(gamepadConfig){try{const{hasErrors:mouseErrors}=validateMouseConfig(gamepadConfig.mouseConfig);if(mouseErrors){return false}const{hasErrors:buttonErrors}=processGamepadConfig(gamepadConfig.keyConfig);return!buttonErrors}catch(e){return false}}exports.isGamepadConfigValid=isGamepadConfigValid;exports.defaultGamepadConfig={mouseConfig:{mouseControls:1,sensitivity:exports.DEFAULT_SENSITIVITY},keyConfig:{a:"Space",b:"KeyB",x:"KeyX",y:"KeyY",leftShoulder:["KeyC","KeyG"],leftTrigger:"RightClick",rightShoulder:"KeyQ",rightTrigger:"Click",start:"Enter",select:"Tab",home:undefined,dpadUp:["ArrowUp","KeyR"],dpadLeft:["ArrowLeft","KeyN"],dpadDown:["ArrowDown","KeyZ"],dpadRight:"ArrowRight",leftStickUp:"KeyW",leftStickLeft:"KeyA",leftStickDown:"KeyS",leftStickRight:"KeyD",rightStickUp:"KeyO",rightStickLeft:"KeyK",rightStickDown:"KeyL",rightStickRight:"Semicolon",leftStickPressed:"ShiftLeft",rightStickPressed:"KeyF"}};exports.emptyGamepadConfig={mouseConfig:{mouseControls:undefined,sensitivity:exports.DEFAULT_SENSITIVITY},keyConfig:Object.keys(exports.defaultGamepadConfig.keyConfig).reduce(((keyConfig,key)=>{keyConfig[key]=undefined;return keyConfig}),{})}},28724:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.postMessageToWindow=exports.dismissOnboardingMsg=exports.forwardToAllTabsMsg=exports.mouseControlChangedMsg=exports.closeWindowMsg=exports.updatePrefsMsg=exports.disableGamepadMsg=exports.activateGamepadConfigMsg=exports.initializeResponseMsg=exports.seenOnboardingMsg=exports.gameChangedMsg=exports.intializedMsg=exports.injectedMsg=exports.forwardedExternalMsg=exports.externalMsg=exports.MessageTypes=void 0;var MessageTypes;(function(MessageTypes){MessageTypes["INJECTED"]="INJECTED";MessageTypes["INITIALIZED"]="INITIALIZED";MessageTypes["GAME_CHANGED"]="GAME_CHANGED";MessageTypes["ACTIVATE_GAMEPAD_CONFIG"]="ACTIVATE_GAMEPAD_CONFIG";MessageTypes["INITIALIZE_RESPONSE"]="INITIALIZE_RESPONSE";MessageTypes["SEEN_ONBOARDING"]="SEEN_ONBOARDING";MessageTypes["UPDATE_PREFS"]="UPDATE_PREFS";MessageTypes["CLOSE_WINDOW"]="CLOSE_WINDOW";MessageTypes["MOUSE_CONTROL_CHANGED"]="MOUSE_CONTROL_CHANGED";MessageTypes["FORWARD_TO_ALL_TABS"]="FORWARD_TO_ALL_TABS";MessageTypes["DISMISS_ONBOARDING"]="DISMISS_ONBOARDING"})(MessageTypes=exports.MessageTypes||(exports.MessageTypes={}));function externalMsg(action){return{action,forwardedMessage:null}}exports.externalMsg=externalMsg;function forwardedExternalMsg(action,forwardedMessage){return{action,forwardedMessage}}exports.forwardedExternalMsg=forwardedExternalMsg;function injectedMsg(){return{type:MessageTypes.INJECTED}}exports.injectedMsg=injectedMsg;function intializedMsg(gameName){return{type:MessageTypes.INITIALIZED,gameName}}exports.intializedMsg=intializedMsg;function gameChangedMsg(gameName){return{type:MessageTypes.GAME_CHANGED,gameName}}exports.gameChangedMsg=gameChangedMsg;function seenOnboardingMsg(seen=true){return{type:MessageTypes.SEEN_ONBOARDING,seen}}exports.seenOnboardingMsg=seenOnboardingMsg;function initializeResponseMsg(name,gamepadConfig,seenOnboarding,prefs){return{type:MessageTypes.INITIALIZE_RESPONSE,name,gamepadConfig,seenOnboarding,prefs}}exports.initializeResponseMsg=initializeResponseMsg;function activateGamepadConfigMsg(name,gamepadConfig){return{type:MessageTypes.ACTIVATE_GAMEPAD_CONFIG,name,gamepadConfig}}exports.activateGamepadConfigMsg=activateGamepadConfigMsg;function disableGamepadMsg(){return activateGamepadConfigMsg(null,null)}exports.disableGamepadMsg=disableGamepadMsg;function updatePrefsMsg(prefs){return{type:MessageTypes.UPDATE_PREFS,prefs}}exports.updatePrefsMsg=updatePrefsMsg;function closeWindowMsg(){return{type:MessageTypes.CLOSE_WINDOW}}exports.closeWindowMsg=closeWindowMsg;function mouseControlChangedMsg({status}){return{type:MessageTypes.MOUSE_CONTROL_CHANGED,status}}exports.mouseControlChangedMsg=mouseControlChangedMsg;function forwardToAllTabsMsg(originalMsg){return{type:MessageTypes.FORWARD_TO_ALL_TABS,originalMsg}}exports.forwardToAllTabsMsg=forwardToAllTabsMsg;function dismissOnboardingMsg(){return{type:MessageTypes.DISMISS_ONBOARDING}}exports.dismissOnboardingMsg=dismissOnboardingMsg;function postMessageToWindow(msg){window.postMessage(Object.assign(Object.assign({},msg),{source:"xcloud-page"}))}exports.postMessageToWindow=postMessageToWindow},72133:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.notPaidPayment=exports.getPayment=exports.getExtPay=void 0;const extpay_1=__importDefault(__webpack_require__(47525));const ga_1=__webpack_require__(32458);function getExtPay(){return(0,extpay_1.default)("keyboard-and-mouse-for-xbox-xcloud")}exports.getExtPay=getExtPay;function getPayment(){return __awaiter(this,void 0,void 0,(function*(){try{return yield getExtPay().getUser()}catch(error){(0,ga_1.postGa)("exception",{description:"extpay.getUser failure"+(error?`: ${error.message}`:""),fatal:true});throw error}}))}exports.getPayment=getPayment;exports.notPaidPayment={paid:false,paidAt:null,installedAt:(new Date).getTime(),trialStartedAt:null}},42748:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.computeTrialState=exports.trialDays=void 0;exports.trialDays=3;const computeTrialState=trialStartedAt=>{if(trialStartedAt===null){return{status:"inactive",remainingDays:exports.trialDays}}const now=(new Date).getTime();const thenMs=typeof trialStartedAt==="number"?trialStartedAt:trialStartedAt.getTime();const dayInMs=1e3*60*60*24;const sevenDays=dayInMs*exports.trialDays;if(now-thenMs<sevenDays){const diff=thenMs+sevenDays-now;const remainingDays=Math.ceil(diff/dayInMs);return{status:"active",remainingDays}}else{return{status:"expired",remainingDays:0}}};exports.computeTrialState=computeTrialState},67429:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NIL",{enumerable:true,get:function get(){return _nil.default}});Object.defineProperty(exports,"parse",{enumerable:true,get:function get(){return _parse.default}});Object.defineProperty(exports,"stringify",{enumerable:true,get:function get(){return _stringify.default}});Object.defineProperty(exports,"v1",{enumerable:true,get:function get(){return _v.default}});Object.defineProperty(exports,"v3",{enumerable:true,get:function get(){return _v2.default}});Object.defineProperty(exports,"v4",{enumerable:true,get:function get(){return _v3.default}});Object.defineProperty(exports,"v5",{enumerable:true,get:function get(){return _v4.default}});Object.defineProperty(exports,"validate",{enumerable:true,get:function get(){return _validate.default}});Object.defineProperty(exports,"version",{enumerable:true,get:function get(){return _version.default}});var _v=_interopRequireDefault(__webpack_require__(63990));var _v2=_interopRequireDefault(__webpack_require__(8237));var _v3=_interopRequireDefault(__webpack_require__(75355));var _v4=_interopRequireDefault(__webpack_require__(83764));var _nil=_interopRequireDefault(__webpack_require__(86314));var _version=_interopRequireDefault(__webpack_require__(58464));var _validate=_interopRequireDefault(__webpack_require__(46435));var _stringify=_interopRequireDefault(__webpack_require__(73990));var _parse=_interopRequireDefault(__webpack_require__(18222));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},94163:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function md5(bytes){if(typeof bytes==="string"){const msg=unescape(encodeURIComponent(bytes));bytes=new Uint8Array(msg.length);for(let i=0;i<msg.length;++i){bytes[i]=msg.charCodeAt(i)}}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes),bytes.length*8))}function md5ToHexEncodedArray(input){const output=[];const length32=input.length*32;const hexTab="0123456789abcdef";for(let i=0;i<length32;i+=8){const x=input[i>>5]>>>i%32&255;const hex=parseInt(hexTab.charAt(x>>>4&15)+hexTab.charAt(x&15),16);output.push(hex)}return output}function getOutputLength(inputLength8){return(inputLength8+64>>>9<<4)+14+1}function wordsToMd5(x,len){x[len>>5]|=128<<len%32;x[getOutputLength(len)-1]=len;let a=1732584193;let b=-271733879;let c=-1732584194;let d=271733878;for(let i=0;i<x.length;i+=16){const olda=a;const oldb=b;const oldc=c;const oldd=d;a=md5ff(a,b,c,d,x[i],7,-680876936);d=md5ff(d,a,b,c,x[i+1],12,-389564586);c=md5ff(c,d,a,b,x[i+2],17,606105819);b=md5ff(b,c,d,a,x[i+3],22,-1044525330);a=md5ff(a,b,c,d,x[i+4],7,-176418897);d=md5ff(d,a,b,c,x[i+5],12,1200080426);c=md5ff(c,d,a,b,x[i+6],17,-1473231341);b=md5ff(b,c,d,a,x[i+7],22,-45705983);a=md5ff(a,b,c,d,x[i+8],7,1770035416);d=md5ff(d,a,b,c,x[i+9],12,-1958414417);c=md5ff(c,d,a,b,x[i+10],17,-42063);b=md5ff(b,c,d,a,x[i+11],22,-1990404162);a=md5ff(a,b,c,d,x[i+12],7,1804603682);d=md5ff(d,a,b,c,x[i+13],12,-40341101);c=md5ff(c,d,a,b,x[i+14],17,-1502002290);b=md5ff(b,c,d,a,x[i+15],22,1236535329);a=md5gg(a,b,c,d,x[i+1],5,-165796510);d=md5gg(d,a,b,c,x[i+6],9,-1069501632);c=md5gg(c,d,a,b,x[i+11],14,643717713);b=md5gg(b,c,d,a,x[i],20,-373897302);a=md5gg(a,b,c,d,x[i+5],5,-701558691);d=md5gg(d,a,b,c,x[i+10],9,38016083);c=md5gg(c,d,a,b,x[i+15],14,-660478335);b=md5gg(b,c,d,a,x[i+4],20,-405537848);a=md5gg(a,b,c,d,x[i+9],5,568446438);d=md5gg(d,a,b,c,x[i+14],9,-1019803690);c=md5gg(c,d,a,b,x[i+3],14,-187363961);b=md5gg(b,c,d,a,x[i+8],20,1163531501);a=md5gg(a,b,c,d,x[i+13],5,-1444681467);d=md5gg(d,a,b,c,x[i+2],9,-51403784);c=md5gg(c,d,a,b,x[i+7],14,1735328473);b=md5gg(b,c,d,a,x[i+12],20,-1926607734);a=md5hh(a,b,c,d,x[i+5],4,-378558);d=md5hh(d,a,b,c,x[i+8],11,-2022574463);c=md5hh(c,d,a,b,x[i+11],16,1839030562);b=md5hh(b,c,d,a,x[i+14],23,-35309556);a=md5hh(a,b,c,d,x[i+1],4,-1530992060);d=md5hh(d,a,b,c,x[i+4],11,1272893353);c=md5hh(c,d,a,b,x[i+7],16,-155497632);b=md5hh(b,c,d,a,x[i+10],23,-1094730640);a=md5hh(a,b,c,d,x[i+13],4,681279174);d=md5hh(d,a,b,c,x[i],11,-358537222);c=md5hh(c,d,a,b,x[i+3],16,-722521979);b=md5hh(b,c,d,a,x[i+6],23,76029189);a=md5hh(a,b,c,d,x[i+9],4,-640364487);d=md5hh(d,a,b,c,x[i+12],11,-421815835);c=md5hh(c,d,a,b,x[i+15],16,530742520);b=md5hh(b,c,d,a,x[i+2],23,-995338651);a=md5ii(a,b,c,d,x[i],6,-198630844);d=md5ii(d,a,b,c,x[i+7],10,1126891415);c=md5ii(c,d,a,b,x[i+14],15,-1416354905);b=md5ii(b,c,d,a,x[i+5],21,-57434055);a=md5ii(a,b,c,d,x[i+12],6,1700485571);d=md5ii(d,a,b,c,x[i+3],10,-1894986606);c=md5ii(c,d,a,b,x[i+10],15,-1051523);b=md5ii(b,c,d,a,x[i+1],21,-2054922799);a=md5ii(a,b,c,d,x[i+8],6,1873313359);d=md5ii(d,a,b,c,x[i+15],10,-30611744);c=md5ii(c,d,a,b,x[i+6],15,-1560198380);b=md5ii(b,c,d,a,x[i+13],21,1309151649);a=md5ii(a,b,c,d,x[i+4],6,-145523070);d=md5ii(d,a,b,c,x[i+11],10,-1120210379);c=md5ii(c,d,a,b,x[i+2],15,718787259);b=md5ii(b,c,d,a,x[i+9],21,-343485551);a=safeAdd(a,olda);b=safeAdd(b,oldb);c=safeAdd(c,oldc);d=safeAdd(d,oldd)}return[a,b,c,d]}function bytesToWords(input){if(input.length===0){return[]}const length8=input.length*8;const output=new Uint32Array(getOutputLength(length8));for(let i=0;i<length8;i+=8){output[i>>5]|=(input[i/8]&255)<<i%32}return output}function safeAdd(x,y){const lsw=(x&65535)+(y&65535);const msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function bitRotateLeft(num,cnt){return num<<cnt|num>>>32-cnt}function md5cmn(q,a,b,x,s,t){return safeAdd(bitRotateLeft(safeAdd(safeAdd(a,q),safeAdd(x,t)),s),b)}function md5ff(a,b,c,d,x,s,t){return md5cmn(b&c|~b&d,a,b,x,s,t)}function md5gg(a,b,c,d,x,s,t){return md5cmn(b&d|c&~d,a,b,x,s,t)}function md5hh(a,b,c,d,x,s,t){return md5cmn(b^c^d,a,b,x,s,t)}function md5ii(a,b,c,d,x,s,t){return md5cmn(c^(b|~d),a,b,x,s,t)}var _default=md5;exports["default"]=_default},54790:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;const randomUUID=typeof crypto!=="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var _default={randomUUID};exports["default"]=_default},86314:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _default="00000000-0000-0000-0000-000000000000";exports["default"]=_default},18222:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _validate=_interopRequireDefault(__webpack_require__(46435));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function parse(uuid){if(!(0,_validate.default)(uuid)){throw TypeError("Invalid UUID")}let v;const arr=new Uint8Array(16);arr[0]=(v=parseInt(uuid.slice(0,8),16))>>>24;arr[1]=v>>>16&255;arr[2]=v>>>8&255;arr[3]=v&255;arr[4]=(v=parseInt(uuid.slice(9,13),16))>>>8;arr[5]=v&255;arr[6]=(v=parseInt(uuid.slice(14,18),16))>>>8;arr[7]=v&255;arr[8]=(v=parseInt(uuid.slice(19,23),16))>>>8;arr[9]=v&255;arr[10]=(v=parseInt(uuid.slice(24,36),16))/1099511627776&255;arr[11]=v/4294967296&255;arr[12]=v>>>24&255;arr[13]=v>>>16&255;arr[14]=v>>>8&255;arr[15]=v&255;return arr}var _default=parse;exports["default"]=_default},70058:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;exports["default"]=_default},33319:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=rng;let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues){getRandomValues=typeof crypto!=="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto);if(!getRandomValues){throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}}return getRandomValues(rnds8)}},93757:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function f(s,x,y,z){switch(s){case 0:return x&y^~x&z;case 1:return x^y^z;case 2:return x&y^x&z^y&z;case 3:return x^y^z}}function ROTL(x,n){return x<<n|x>>>32-n}function sha1(bytes){const K=[1518500249,1859775393,2400959708,3395469782];const H=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof bytes==="string"){const msg=unescape(encodeURIComponent(bytes));bytes=[];for(let i=0;i<msg.length;++i){bytes.push(msg.charCodeAt(i))}}else if(!Array.isArray(bytes)){bytes=Array.prototype.slice.call(bytes)}bytes.push(128);const l=bytes.length/4+2;const N=Math.ceil(l/16);const M=new Array(N);for(let i=0;i<N;++i){const arr=new Uint32Array(16);for(let j=0;j<16;++j){arr[j]=bytes[i*64+j*4]<<24|bytes[i*64+j*4+1]<<16|bytes[i*64+j*4+2]<<8|bytes[i*64+j*4+3]}M[i]=arr}M[N-1][14]=(bytes.length-1)*8/Math.pow(2,32);M[N-1][14]=Math.floor(M[N-1][14]);M[N-1][15]=(bytes.length-1)*8&4294967295;for(let i=0;i<N;++i){const W=new Uint32Array(80);for(let t=0;t<16;++t){W[t]=M[i][t]}for(let t=16;t<80;++t){W[t]=ROTL(W[t-3]^W[t-8]^W[t-14]^W[t-16],1)}let a=H[0];let b=H[1];let c=H[2];let d=H[3];let e=H[4];for(let t=0;t<80;++t){const s=Math.floor(t/20);const T=ROTL(a,5)+f(s,b,c,d)+e+K[s]+W[t]>>>0;e=d;d=c;c=ROTL(b,30)>>>0;b=a;a=T}H[0]=H[0]+a>>>0;H[1]=H[1]+b>>>0;H[2]=H[2]+c>>>0;H[3]=H[3]+d>>>0;H[4]=H[4]+e>>>0}return[H[0]>>24&255,H[0]>>16&255,H[0]>>8&255,H[0]&255,H[1]>>24&255,H[1]>>16&255,H[1]>>8&255,H[1]&255,H[2]>>24&255,H[2]>>16&255,H[2]>>8&255,H[2]&255,H[3]>>24&255,H[3]>>16&255,H[3]>>8&255,H[3]&255,H[4]>>24&255,H[4]>>16&255,H[4]>>8&255,H[4]&255]}var _default=sha1;exports["default"]=_default},73990:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;exports.unsafeStringify=unsafeStringify;var _validate=_interopRequireDefault(__webpack_require__(46435));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const byteToHex=[];for(let i=0;i<256;++i){byteToHex.push((i+256).toString(16).slice(1))}function unsafeStringify(arr,offset=0){return(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase()}function stringify(arr,offset=0){const uuid=unsafeStringify(arr,offset);if(!(0,_validate.default)(uuid)){throw TypeError("Stringified UUID is invalid")}return uuid}var _default=stringify;exports["default"]=_default},63990:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _rng=_interopRequireDefault(__webpack_require__(33319));var _stringify=__webpack_require__(73990);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}let _nodeId;let _clockseq;let _lastMSecs=0;let _lastNSecs=0;function v1(options,buf,offset){let i=buf&&offset||0;const b=buf||new Array(16);options=options||{};let node=options.node||_nodeId;let clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){const seedBytes=options.random||(options.rng||_rng.default)();if(node==null){node=_nodeId=[seedBytes[0]|1,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]}if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&16383}}let msecs=options.msecs!==undefined?options.msecs:Date.now();let nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;const dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;const tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;const tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;for(let n=0;n<6;++n){b[i+n]=node[n]}return buf||(0,_stringify.unsafeStringify)(b)}var _default=v1;exports["default"]=_default},8237:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _v=_interopRequireDefault(__webpack_require__(17925));var _md=_interopRequireDefault(__webpack_require__(94163));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const v3=(0,_v.default)("v3",48,_md.default);var _default=v3;exports["default"]=_default},17925:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.URL=exports.DNS=void 0;exports["default"]=v35;var _stringify=__webpack_require__(73990);var _parse=_interopRequireDefault(__webpack_require__(18222));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function stringToBytes(str){str=unescape(encodeURIComponent(str));const bytes=[];for(let i=0;i<str.length;++i){bytes.push(str.charCodeAt(i))}return bytes}const DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";exports.DNS=DNS;const URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";exports.URL=URL;function v35(name,version,hashfunc){function generateUUID(value,namespace,buf,offset){var _namespace;if(typeof value==="string"){value=stringToBytes(value)}if(typeof namespace==="string"){namespace=(0,_parse.default)(namespace)}if(((_namespace=namespace)===null||_namespace===void 0?void 0:_namespace.length)!==16){throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)")}let bytes=new Uint8Array(16+value.length);bytes.set(namespace);bytes.set(value,namespace.length);bytes=hashfunc(bytes);bytes[6]=bytes[6]&15|version;bytes[8]=bytes[8]&63|128;if(buf){offset=offset||0;for(let i=0;i<16;++i){buf[offset+i]=bytes[i]}return buf}return(0,_stringify.unsafeStringify)(bytes)}try{generateUUID.name=name}catch(err){}generateUUID.DNS=DNS;generateUUID.URL=URL;return generateUUID}},75355:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _native=_interopRequireDefault(__webpack_require__(54790));var _rng=_interopRequireDefault(__webpack_require__(33319));var _stringify=__webpack_require__(73990);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function v4(options,buf,offset){if(_native.default.randomUUID&&!buf&&!options){return _native.default.randomUUID()}options=options||{};const rnds=options.random||(options.rng||_rng.default)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){offset=offset||0;for(let i=0;i<16;++i){buf[offset+i]=rnds[i]}return buf}return(0,_stringify.unsafeStringify)(rnds)}var _default=v4;exports["default"]=_default},83764:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _v=_interopRequireDefault(__webpack_require__(17925));var _sha=_interopRequireDefault(__webpack_require__(93757));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const v5=(0,_v.default)("v5",80,_sha.default);var _default=v5;exports["default"]=_default},46435:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _regex=_interopRequireDefault(__webpack_require__(70058));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function validate(uuid){return typeof uuid==="string"&&_regex.default.test(uuid)}var _default=validate;exports["default"]=_default},58464:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _validate=_interopRequireDefault(__webpack_require__(46435));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function version(uuid){if(!(0,_validate.default)(uuid)){throw TypeError("Invalid UUID")}return parseInt(uuid.slice(14,15),16)}var _default=version;exports["default"]=_default},93150:function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global,factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[module],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{var mod}})(typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:this,(function(module){"use strict";if(typeof browser==="undefined"||Object.getPrototypeOf(browser)!==Object.prototype){const CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE="The message port closed before a response was received.";const SEND_RESPONSE_DEPRECATION_WARNING="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)";const wrapAPIs=extensionAPIs=>{const apiMetadata={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:true},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:true},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:true},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:true},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:true},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:true}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:false}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:true},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:true},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:true}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:true},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:true},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:true},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:true}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(apiMetadata).length===0){throw new Error("api-metadata.json has not been included in browser-polyfill")}class DefaultWeakMap extends WeakMap{constructor(createItem,items=undefined){super(items);this.createItem=createItem}get(key){if(!this.has(key)){this.set(key,this.createItem(key))}return super.get(key)}}const isThenable=value=>value&&typeof value==="object"&&typeof value.then==="function";const makeCallback=(promise,metadata)=>(...callbackArgs)=>{if(extensionAPIs.runtime.lastError){promise.reject(extensionAPIs.runtime.lastError)}else if(metadata.singleCallbackArg||callbackArgs.length<=1&&metadata.singleCallbackArg!==false){promise.resolve(callbackArgs[0])}else{promise.resolve(callbackArgs)}};const pluralizeArguments=numArgs=>numArgs==1?"argument":"arguments";const wrapAsyncFunction=(name,metadata)=>function asyncFunctionWrapper(target,...args){if(args.length<metadata.minArgs){throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`)}if(args.length>metadata.maxArgs){throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`)}return new Promise(((resolve,reject)=>{if(metadata.fallbackToNoCallback){try{target[name](...args,makeCallback({resolve,reject},metadata))}catch(cbError){console.warn(`${name} API method doesn't seem to support the callback parameter, `+"falling back to call it without a callback: ",cbError);target[name](...args);metadata.fallbackToNoCallback=false;metadata.noCallback=true;resolve()}}else if(metadata.noCallback){target[name](...args);resolve()}else{target[name](...args,makeCallback({resolve,reject},metadata))}}))};const wrapMethod=(target,method,wrapper)=>new Proxy(method,{apply(targetMethod,thisObj,args){return wrapper.call(thisObj,target,...args)}});let hasOwnProperty=Function.call.bind(Object.prototype.hasOwnProperty);const wrapObject=(target,wrappers={},metadata={})=>{let cache=Object.create(null);let handlers={has(proxyTarget,prop){return prop in target||prop in cache},get(proxyTarget,prop,receiver){if(prop in cache){return cache[prop]}if(!(prop in target)){return undefined}let value=target[prop];if(typeof value==="function"){if(typeof wrappers[prop]==="function"){value=wrapMethod(target,target[prop],wrappers[prop])}else if(hasOwnProperty(metadata,prop)){let wrapper=wrapAsyncFunction(prop,metadata[prop]);value=wrapMethod(target,target[prop],wrapper)}else{value=value.bind(target)}}else if(typeof value==="object"&&value!==null&&(hasOwnProperty(wrappers,prop)||hasOwnProperty(metadata,prop))){value=wrapObject(value,wrappers[prop],metadata[prop])}else if(hasOwnProperty(metadata,"*")){value=wrapObject(value,wrappers[prop],metadata["*"])}else{Object.defineProperty(cache,prop,{configurable:true,enumerable:true,get(){return target[prop]},set(value){target[prop]=value}});return value}cache[prop]=value;return value},set(proxyTarget,prop,value,receiver){if(prop in cache){cache[prop]=value}else{target[prop]=value}return true},defineProperty(proxyTarget,prop,desc){return Reflect.defineProperty(cache,prop,desc)},deleteProperty(proxyTarget,prop){return Reflect.deleteProperty(cache,prop)}};let proxyTarget=Object.create(target);return new Proxy(proxyTarget,handlers)};const wrapEvent=wrapperMap=>({addListener(target,listener,...args){target.addListener(wrapperMap.get(listener),...args)},hasListener(target,listener){return target.hasListener(wrapperMap.get(listener))},removeListener(target,listener){target.removeListener(wrapperMap.get(listener))}});let loggedSendResponseDeprecationWarning=false;const onMessageWrappers=new DefaultWeakMap((listener=>{if(typeof listener!=="function"){return listener}return function onMessage(message,sender,sendResponse){let didCallSendResponse=false;let wrappedSendResponse;let sendResponsePromise=new Promise((resolve=>{wrappedSendResponse=function(response){if(!loggedSendResponseDeprecationWarning){console.warn(SEND_RESPONSE_DEPRECATION_WARNING,(new Error).stack);loggedSendResponseDeprecationWarning=true}didCallSendResponse=true;resolve(response)}}));let result;try{result=listener(message,sender,wrappedSendResponse)}catch(err){result=Promise.reject(err)}const isResultThenable=result!==true&&isThenable(result);if(result!==true&&!isResultThenable&&!didCallSendResponse){return false}const sendPromisedResult=promise=>{promise.then((msg=>{sendResponse(msg)}),(error=>{let message;if(error&&(error instanceof Error||typeof error.message==="string")){message=error.message}else{message="An unexpected error occurred"}sendResponse({__mozWebExtensionPolyfillReject__:true,message})})).catch((err=>{console.error("Failed to send onMessage rejected reply",err)}))};if(isResultThenable){sendPromisedResult(result)}else{sendPromisedResult(sendResponsePromise)}return true}}));const wrappedSendMessageCallback=({reject,resolve},reply)=>{if(extensionAPIs.runtime.lastError){if(extensionAPIs.runtime.lastError.message===CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE){resolve()}else{reject(extensionAPIs.runtime.lastError)}}else if(reply&&reply.__mozWebExtensionPolyfillReject__){reject(new Error(reply.message))}else{resolve(reply)}};const wrappedSendMessage=(name,metadata,apiNamespaceObj,...args)=>{if(args.length<metadata.minArgs){throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`)}if(args.length>metadata.maxArgs){throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`)}return new Promise(((resolve,reject)=>{const wrappedCb=wrappedSendMessageCallback.bind(null,{resolve,reject});args.push(wrappedCb);apiNamespaceObj.sendMessage(...args)}))};const staticWrappers={runtime:{onMessage:wrapEvent(onMessageWrappers),onMessageExternal:wrapEvent(onMessageWrappers),sendMessage:wrappedSendMessage.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:wrappedSendMessage.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}};const settingMetadata={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};apiMetadata.privacy={network:{"*":settingMetadata},services:{"*":settingMetadata},websites:{"*":settingMetadata}};return wrapObject(extensionAPIs,staticWrappers,apiMetadata)};if(typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id){throw new Error("This script should only be loaded in a browser extension.")}module.exports=wrapAPIs(chrome)}else{module.exports=browser}}))}};var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId].call(module.exports,module,module.exports,__webpack_require__);return module.exports}(()=>{__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module["default"]:()=>module;__webpack_require__.d(getter,{a:getter});return getter}})();(()=>{__webpack_require__.d=(exports,definition)=>{for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}}})();(()=>{__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop)})();(()=>{__webpack_require__.r=exports=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})}})();var __webpack_exports__=__webpack_require__(98136)})();